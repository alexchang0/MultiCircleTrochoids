var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6","es3");$jscomp.stringPadding=function(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""};
$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(c,a-b.length)+b}},"es8","es3");var circle_c=function(a,b,c){this.radius=Number(a);this.speedRatio=Number(b);this.IAO=Number(c);this.CAO=Number(0);this.theta=Number(0);this.alpha=Number(0);this.x=Number(0);this.y=Number(0);this.initX=Number(0);this.initY=Number(0)};my_js_init();
var X_CORD_SIZE=500,SCALE=xsize/X_CORD_SIZE,STEP=1/SCALE,step_per_frame_input=30,STEP_PER_FRAME=30,theta_step_size=.003,nSteps=0,theta=0,circleCount=0,animateCircle=!0,stop=!1,clear=!1,drawing=!1,currentCycles=0,animateState=2,convergeTheta=2*Math.PI,colorFactor=40,input_theta_step=.003,input_iao=0;my_js_set_canvas(cc);
function my_js_canvas_test(){my_js_draw_line(50,300,300,100,255,0,255);for(var a=0;500>a;a++)my_js_draw_circle(Math.random()*window.innerWidth,Math.random()*window.innerHeight,30,50,50,0)}var circle=[];function reset(){currentCycles=theta=nSteps=0;animateState=2;document.getElementById("sel1").value="animateToggle"}function isAligned(){for(var a=1;a<circleCount;a++)if(1E-4<Math.abs(circle[a].x-circle[a].initX)||1E-4<Math.abs(circle[a].y-circle[a].initY))return!1;return!0}
function getConvergePoint(){evaluate(0);for(var a=1;a<circleCount;a++)circle[a].initX=circle[a].x,circle[a].initY=circle[a].y;console.log("evaluated");for(a=1;1E4>a;a++)if(evaluate(2*a*Math.PI),isAligned())return 2*a*Math.PI;console.log("cannot find converging angle");return 0}
function clickDraw(){if(!drawing){drawing=!0;var a=document.getElementById("radiusFormID"),b=document.getElementById("speedFormID"),c,d=1;parametersForm=document.getElementById("parametersFormID");inputScale=Number(parametersForm.elements[0].value);colorFactor=Number(parametersForm.elements[1].value);input_theta_step=Number(parametersForm.elements[2].value);update_step_per_frame();input_iao=2*Number(parametersForm.elements[3].value)*Math.PI/360;circle=[];for(c=0;c<a.length&&0!=d;c++){var e=a.elements[c].value;
d=0<c?b.elements[c-1].value:1;mycircle=new circle_c(e,d,input_iao);circle.push(mycircle)}circleCount=circle.length;mycircle=new circle_c(0,0);circle.push(mycircle);mycircle=new circle_c(0,0);circle.push(mycircle);console.log("values = %d, %d",a.elements[0].value,a.elements[1].value);console.log("circle = %d, %d",circle[0].radius,circle[1].radius);console.log("circleCount %d",circleCount);convergeTheta=getConvergePoint();a=circle[0].radius;for(c=1;c<circleCount-1;c++)0>circle[c].radius&&(a-=2*circle[c].radius);
0<circle[circleCount-1].radius&&(a-=circle[circleCount-1].radius);scale=250/a*inputScale;animateCircle=!0;reset();animate()}}function update_step_per_frame(){0<step_per_frame_input?(STEP_PER_FRAME=step_per_frame_input,theta_step_size=input_theta_step):0>step_per_frame_input?(STEP_PER_FRAME=-step_per_frame_input,theta_step_size=-input_theta_step):theta_step_size=0}function clickSpeedUp(){step_per_frame_input+=10;update_step_per_frame()}
function clickSlowDown(){step_per_frame_input-=10;update_step_per_frame()}function clickClear(){drawing?(bc.clearRect(0,0,innerWidth,innerHeight),clear=stop=!0,animateCircle=!1,reset()):clear=!0}var paused=!1;function clickPause(){drawing?paused=!0:(drawing=!0,animate())}function clickStop(){drawing&&(stop=!0);animateCircle=!1;reset()}function clickAnimate(){animateState=2;document.getElementById("sel1").value="animateToggle";animateCircle=animateCircle?!1:!0}
function selectAnimation(a){console.log("selectAnimation(%s)",a);var b=document.getElementById("sel1");"animateOn"==a?(animateOn(),b.value="animateOn",console.log("animateOn")):"animateOff"==a?(animateOff(),b.value="animateOff",console.log("animateOff")):(animateToggle(),b.value="animateToggle",console.log("animateToggle"))}function animateOn(){animateState=1;animateCircle=!0}function animateOff(){animateState=0;animateCircle=!1}function animateToggle(){animateState=2}
window.addEventListener("wheel",wheelScrolling);function wheelScrolling(a){0>a.deltaY?(console.log("scrolling up"),step_per_frame_input++,update_step_per_frame()):0<a.deltaY&&(console.log("scrolling down"),step_per_frame_input--,update_step_per_frame())}
function evaluate(a){circle[0].theta=a;for(a=0;a<circleCount;a++)circle[a+1].alpha=-1*circle[a].theta*circle[a].radius/circle[a+1].radius,circle[a+1].CAO=circle[a+1].alpha+circle[a].theta+circle[a].CAO+circle[a+1].IAO,circle[a+1].theta=circle[0].theta*circle[0].radius*circle[a+2].speedRatio/circle[1].speedRatio/circle[a+1].radius,circle[a+1].x=circle[a].x+(circle[a].radius-circle[a+1].radius)*Math.cos(circle[a].theta+circle[a].CAO),circle[a+1].y=circle[a].y+(circle[a].radius-circle[a+1].radius)*Math.sin(circle[a].theta+
circle[a].CAO)}
function step(){var a=theta/colorFactor;var b=(Math.sin(a+2*Math.PI/4)+1)/2;b*=b;var c=(Math.sin(a-0*Math.PI/4)+1)/2;c*=c;c*=c;var d=(Math.sin(a-2*Math.PI/4)+1)/2;d*=d;a=(Math.sin(a-4*Math.PI/4)+1)/2;a*=a;a*=a;b=b*b+5*c/6;d=d*d+5*c/6;evaluate(theta);var e=circle[circleCount-1].x*scale;c=circle[circleCount-1].y*scale;clear&&(console.log("Clearing"),bc.clearRect(0,0,innerWidth,innerHeight));clear||stop||0==nSteps||(my_js_set_canvas(bc),my_js_draw_line(e,c,step.x1,step.y1,b,d,a));step.x1=e;step.y1=c;
if(0==nSteps%STEP_PER_FRAME){cc.clearRect(0,0,innerWidth,innerHeight);cc.drawImage(backCanvas,0,0);my_js_set_canvas(cc);for(b=0;animateCircle&&b<circleCount;b++)b!=circleCount-1?(my_js_draw_circle(circle[b].x*scale,circle[b].y*scale,circle[b].radius*scale,1,0,1),my_js_draw_arc(circle[b].x*scale,circle[b].y*scale,circle[b].radius*scale,-circle[b].CAO-2*Math.PI/360*2,-circle[b].CAO+2*Math.PI/360*2,1,1,1)):(my_js_draw_circle(circle[b].x*scale,circle[b].y*scale,5,1,1,1),my_js_draw_line(circle[b].x*scale,
circle[b].y*scale,(circle[b].x+Math.cos(circle[b-1].CAO)*circle[b].radius)*scale,(circle[b].y+Math.sin(circle[b-1].CAO)*circle[b].radius)*scale,1,1,1));animateCircle||stop||paused||my_js_draw_circle(circle[circleCount-1].x*scale,circle[circleCount-1].y*scale,5,1,1,1)}nSteps++;theta+=theta_step_size}
function show_status(){var a=Math.round(360*convergeTheta/Math.PI/2),b=Math.round(360*theta/Math.PI/2),c=Math.round(theta/convergeTheta*100);cycles=Math.floor(theta/convergeTheta);text="  Converge Angle: "+a.toString()+" Theta: "+b.toString().padStart(5)+" "+c.toString().padStart(3)+"%  Cycles:"+cycles.toString().padStart(2)+" Steps per frame: "+step_per_frame_input;document.getElementById("statusString").innerHTML=text}
function animate(){for(var a=0;a<STEP_PER_FRAME;a++)step();show_status();cycles>currentCycles&&(currentCycles=cycles,2==animateState&&(animateCircle=animateCircle?!1:!0));clear&&(clear=!1);stop||paused?paused=drawing=clear=stop=!1:requestAnimationFrame(animate)}show_status();
